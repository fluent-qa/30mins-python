# 🎈 表单字段只读动态控制


## 使用方法
```java
@EruptField(
            views = @View(title = "数据新增修改权限"),
            edit = @Edit(title = "数据新增修改权限",
                    //添加@Readonly注解，实现Readonly.ReadonlyHandle接口
            readonly = @Readonly(add = false, edit = false, exprHandler = DemoRead.class)
            )
    )
private String demo;
```
```java
@Service
public class DemoRead implements Readonly.ReadonlyHandler {
    
    @Resource
    private EruptUserService eruptUserService;
    
    @Override
    public boolean add(boolean add, String[] params) {
        //例如只有超级管理员可以新增的字段
        return !eruptUserService.getCurrentEruptUser().getIsAdmin();
    }

    @Override
    public boolean edit(boolean edit, String[] params) {
        return false;
    }
}
```

## 注解文件定义
```java
public @interface Readonly {
    boolean add() default true;//默认true 会传入add方法中

    boolean edit() default true;//默认true 会传入edit方法中

    String[] params() default {};//会传入接口方法中

    Class<? extends Readonly.ReadonlyHandler> exprHandler() default Readonly.ReadonlyHandler.class;

    public interface ReadonlyHandler {
        //新增权限
        boolean add(boolean add, String[] params);

        //修改权限
        boolean edit(boolean edit, String[] params);
    }
}

```





> 原文: <https://www.yuque.com/erupt/bopi91>