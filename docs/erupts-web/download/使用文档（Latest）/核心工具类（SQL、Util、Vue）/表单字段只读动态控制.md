# ğŸˆ è¡¨å•å­—æ®µåªè¯»åŠ¨æ€æ§åˆ¶


## ä½¿ç”¨æ–¹æ³•
```java
@EruptField(
            views = @View(title = "æ•°æ®æ–°å¢ä¿®æ”¹æƒé™"),
            edit = @Edit(title = "æ•°æ®æ–°å¢ä¿®æ”¹æƒé™",
                    //æ·»åŠ @Readonlyæ³¨è§£ï¼Œå®ç°Readonly.ReadonlyHandleæ¥å£
            readonly = @Readonly(add = false, edit = false, exprHandler = DemoRead.class)
            )
    )
private String demo;
```
```java
@Service
public class DemoRead implements Readonly.ReadonlyHandler {
    
    @Resource
    private EruptUserService eruptUserService;
    
    @Override
    public boolean add(boolean add, String[] params) {
        //ä¾‹å¦‚åªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥æ–°å¢çš„å­—æ®µ
        return !eruptUserService.getCurrentEruptUser().getIsAdmin();
    }

    @Override
    public boolean edit(boolean edit, String[] params) {
        return false;
    }
}
```

## æ³¨è§£æ–‡ä»¶å®šä¹‰
```java
public @interface Readonly {
    boolean add() default true;//é»˜è®¤true ä¼šä¼ å…¥addæ–¹æ³•ä¸­

    boolean edit() default true;//é»˜è®¤true ä¼šä¼ å…¥editæ–¹æ³•ä¸­

    String[] params() default {};//ä¼šä¼ å…¥æ¥å£æ–¹æ³•ä¸­

    Class<? extends Readonly.ReadonlyHandler> exprHandler() default Readonly.ReadonlyHandler.class;

    public interface ReadonlyHandler {
        //æ–°å¢æƒé™
        boolean add(boolean add, String[] params);

        //ä¿®æ”¹æƒé™
        boolean edit(boolean edit, String[] params);
    }
}

```





> åŸæ–‡: <https://www.yuque.com/erupt/bopi91>